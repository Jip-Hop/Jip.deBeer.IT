var idx;!function(){function e(e){var t=e.dataset.fallback;e.removeAttribute("data-fallback"),e.src=t,e.removeAttribute("srcset")}var t;t=()=>{console.log("LOADED"),document.querySelectorAll("img[data-fallback]").forEach((t=>{console.log(t.complete,t.naturalHeight,t),t.complete&&0===t.naturalHeight&&e(t)}))},"complete"===document.readyState?t():window.addEventListener("load",t),function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}((function(){document.body.addEventListener("error",(t=>{console.log("body error",t.target);var i=t.target;"IMG"===i.tagName&&i.hasAttribute("data-fallback")&&e(i)}),!0);var t=document.querySelector("#main > .archive .entries-list");if(t){var i=document.querySelector("#main > .archive .pagination");if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){i.remove(),document.querySelector("#main > .archive [data-infinite-scroll]").remove(),document.querySelector("#main > .archive").insertAdjacentHTML("beforeend",'<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');var n=document.querySelector("#main > .archive .lds-ellipsis"),r=2,o=window.location.origin+window.location.pathname,s=window.location.pathname.split("/");s.pop(),(s=s.pop()).startsWith("page")&&(r=parseInt(s.split("page").pop())+1,o+="../");var c=!1;var a=new IntersectionObserver((function(e){e.some((function(e){return e.intersectionRatio>0}))&&(c||(c=!0,fetch(o+"/page"+r+"/").then((function(e){switch(e.status){case 200:return e.text();case 404:a.unobserve(n),n.remove()}})).then((function(e){var i=new RegExp('(?:<div class="entries-list">)((.[\\s\\S]*))(?:<i data-infinite-scroll)',"ig").exec(e);i&&i.length>1&&(t.insertAdjacentHTML("beforeend",i[1]),r++)})).catch((function(e){console.log(e)})).finally((function(){c=!1}))))}));a.observe(n)}else i.style="display: flex"}function l(e,t,i){!function(e,t){var i=document.createElement("script");i.type="text/javascript",i.onload=t,i.src=e,document.head.appendChild(i)}(e[t],(function(){t<e.length-1?l(e,t+1,i):i()}))}document.addEventListener("keyup",(function(e){if("Escape"===e.key){var t=document.querySelector(".initial-content");t&&t.classList.contains("is--hidden")&&(document.querySelector(".search-content")?.classList.remove("is--visible"),t.classList.remove("is--hidden"))}}));var d=document.currentScript.src.substr(0,document.currentScript.src.lastIndexOf("/")),u=document.querySelector(".search__toggle");if(u){function v(){window.scrollTo(0,0),document.querySelector(".search-content")?.classList.toggle("is--visible"),document.querySelector(".initial-content")?.classList.toggle("is--hidden"),document.querySelector(".search-content input")?.focus()}u.addEventListener("click",(function e(){u.removeEventListener("click",e),u.addEventListener("click",v),v(),l([d+"/lunr/lunr.min.js",d+"/lunr/lunr-store.js"],0,(function(){idx=lunr((function(){for(var e in this.field("title"),this.field("excerpt"),this.field("tags"),this.ref("id"),this.pipeline.remove(lunr.trimmer),store)this.add({title:store[e].title,excerpt:store[e].excerpt,tags:store[e].tags,id:e})}));var e=document.getElementById("search");e&&e.addEventListener("keyup",(function(){var t=document.getElementById("results");if(t){var i=e.value.toLowerCase(),n=idx.query((function(e){i.split(lunr.tokenizer.separator).forEach((function(t){e.term(t,{boost:100}),i.lastIndexOf(" ")!=i.length-1&&e.term(t,{usePipeline:!1,wildcard:lunr.Query.wildcard.TRAILING,boost:10}),""!=t&&e.term(t,{usePipeline:!1,editDistance:1,boost:1})}))}));for(var r in t.innerHTML='<p class="results__found">'+n.length+" Result(s) found</p>",n){var o=n[r].ref,s='<div class="list__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><a href="'+store[o].url+'" rel="permalink"><h2 class="archive__item-title" itemprop="headline">'+store[o].title+'</h2><div class="archive__item-teaser">'+store[o].teaser+'</div><p class="archive__item-excerpt" itemprop="description">'+store[o].excerpt.split(" ").splice(0,20).join(" ")+"...</p></a></article></div>";t.insertAdjacentHTML("beforeend",s)}}}))}))}))}}))}();