var idx;!function(){function e(e){if(e.complete&&0===e.naturalHeight){if(!e.hasAttribute("data-fallback"))return;var t=e.dataset.fallback;e.removeAttribute("data-fallback"),e.src=t,e.removeAttribute("srcset")}}var t;t=()=>{console.log("LOADED"),document.querySelectorAll("img[data-fallback]").forEach((t=>{console.log(t.complete,t.naturalHeight,t),e(t)}))},"complete"===document.readyState?t():window.addEventListener("load",t),function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}((function(){function t(t){console.log("body error",t.target);var i=t.target;"IMG"===i.tagName&&i.hasAttribute("data-fallback")&&e(i)}document.body.addEventListener("error",t,!0),document.body.addEventListener("load",t,!0);var i=document.querySelector("#main > .archive .entries-list");if(i){var n=document.querySelector("#main > .archive .pagination");if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){n.remove(),document.querySelector("#main > .archive [data-infinite-scroll]").remove(),document.querySelector("#main > .archive").insertAdjacentHTML("beforeend",'<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');var r=document.querySelector("#main > .archive .lds-ellipsis"),o=2,a=window.location.origin+window.location.pathname,c=window.location.pathname.split("/");c.pop(),(c=c.pop()).startsWith("page")&&(o=parseInt(c.split("page").pop())+1,a+="../");var s=!1;var l=new IntersectionObserver((function(e){e.some((function(e){return e.intersectionRatio>0}))&&(s||(s=!0,fetch(a+"/page"+o+"/").then((function(e){switch(e.status){case 200:return e.text();case 404:l.unobserve(r),r.remove()}})).then((function(e){var t=new RegExp('(?:<div class="entries-list">)((.[\\s\\S]*))(?:<i data-infinite-scroll)',"ig").exec(e);t&&t.length>1&&(i.insertAdjacentHTML("beforeend",t[1]),o++)})).catch((function(e){console.log(e)})).finally((function(){s=!1}))))}));l.observe(r)}else n.style="display: flex"}function d(e,t,i){!function(e,t){var i=document.createElement("script");i.type="text/javascript",i.onload=t,i.src=e,document.head.appendChild(i)}(e[t],(function(){t<e.length-1?d(e,t+1,i):i()}))}document.addEventListener("keyup",(function(e){if("Escape"===e.key){var t=document.querySelector(".initial-content");t&&t.classList.contains("is--hidden")&&(document.querySelector(".search-content")?.classList.remove("is--visible"),t.classList.remove("is--hidden"))}}));var u=document.currentScript.src.substr(0,document.currentScript.src.lastIndexOf("/")),v=document.querySelector(".search__toggle");if(v){function m(){window.scrollTo(0,0),document.querySelector(".search-content")?.classList.toggle("is--visible"),document.querySelector(".initial-content")?.classList.toggle("is--hidden"),document.querySelector(".search-content input")?.focus()}v.addEventListener("click",(function e(){v.removeEventListener("click",e),v.addEventListener("click",m),m(),d([u+"/lunr/lunr.min.js",u+"/lunr/lunr-store.js"],0,(function(){idx=lunr((function(){for(var e in this.field("title"),this.field("excerpt"),this.field("tags"),this.ref("id"),this.pipeline.remove(lunr.trimmer),store)this.add({title:store[e].title,excerpt:store[e].excerpt,tags:store[e].tags,id:e})}));var e=document.getElementById("search");e&&e.addEventListener("keyup",(function(){var t=document.getElementById("results");if(t){var i=e.value.toLowerCase(),n=idx.query((function(e){i.split(lunr.tokenizer.separator).forEach((function(t){e.term(t,{boost:100}),i.lastIndexOf(" ")!=i.length-1&&e.term(t,{usePipeline:!1,wildcard:lunr.Query.wildcard.TRAILING,boost:10}),""!=t&&e.term(t,{usePipeline:!1,editDistance:1,boost:1})}))}));for(var r in t.innerHTML='<p class="results__found">'+n.length+" Result(s) found</p>",n){var o=n[r].ref,a='<div class="list__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><a href="'+store[o].url+'" rel="permalink"><h2 class="archive__item-title" itemprop="headline">'+store[o].title+'</h2><div class="archive__item-teaser">'+store[o].teaser+'</div><p class="archive__item-excerpt" itemprop="description">'+store[o].excerpt.split(" ").splice(0,20).join(" ")+"...</p></a></article></div>";t.insertAdjacentHTML("beforeend",a)}}}))}))}))}}))}();