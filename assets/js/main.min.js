var idx;!function(){var e;e=function(){var e,t,i,n,r,o,s,c=document.querySelector("#main > .archive .entries-list");function a(e,t,i){var n,r,o;n=e[t],r=function(){t<e.length-1?a(e,t+1,i):i()},(o=document.createElement("script")).type="text/javascript",o.onload=r,o.src=n,document.head.appendChild(o)}c&&(e=document.querySelector("#main > .archive .pagination"),"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?(e.remove(),document.querySelector("#main > .archive [data-infinite-scroll]").remove(),document.querySelector("#main > .archive").insertAdjacentHTML("beforeend",'<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>'),t=document.querySelector("#main > .archive .lds-ellipsis"),i=2,n=window.location.origin+window.location.pathname,(r=window.location.pathname.split("/")).pop(),(r=r.pop()).startsWith("page")&&(i=parseInt(r.split("page").pop())+1,n+="../"),o=!1,(s=new IntersectionObserver(function(e){e.some(function(e){return 0<e.intersectionRatio})&&(o||(o=!0,fetch(n+"/page"+i+"/").then(function(e){switch(e.status){case 200:return e.text();case 404:s.unobserve(t),t.remove()}}).then(function(e){e=new RegExp('(?:<div class="entries-list">)((.[\\s\\S]*))(?:<i data-infinite-scroll)',"ig").exec(e);e&&1<e.length&&(c.insertAdjacentHTML("beforeend",e[1]),i++)}).catch(function(e){console.log(e)}).finally(function(){o=!1})))})).observe(t)):e.style="display: flex"),document.addEventListener("keyup",function(e){var t;27!==e.keyCode||(t=document.querySelector(".initial-content"))&&t.classList.contains("is--hidden")&&((e=document.querySelector(".search-content"))&&e.classList.toggle("is--visible"),(t=document.querySelector(".initial-content"))&&t.classList.toggle("is--hidden"))});var l=document.currentScript.src.substr(0,document.currentScript.src.lastIndexOf("/")),d=document.querySelector(".search__toggle");function u(){window.scrollTo(0,0);var e=document.querySelector(".search-content");e&&e.classList.toggle("is--visible");e=document.querySelector(".initial-content");e&&e.classList.toggle("is--hidden");e=document.querySelector(".search-content input");e&&e.focus()}d&&d.addEventListener("click",function e(){d.removeEventListener("click",e),d.addEventListener("click",u),u(),a([l+"/lunr/lunr.min.js",l+"/lunr/lunr-store.js"],0,function(){idx=lunr(function(){for(var e in this.field("title"),this.field("excerpt"),this.field("tags"),this.ref("id"),this.pipeline.remove(lunr.trimmer),store)this.add({title:store[e].title,excerpt:store[e].excerpt,tags:store[e].tags,id:e})});var o=document.getElementById("search");o&&o.addEventListener("keyup",function(){var e=document.getElementById("results");if(e){var t,i=o.value.toLowerCase(),n=idx.query(function(t){i.split(lunr.tokenizer.separator).forEach(function(e){t.term(e,{boost:100}),i.lastIndexOf(" ")!=i.length-1&&t.term(e,{usePipeline:!1,wildcard:lunr.Query.wildcard.TRAILING,boost:10}),""!=e&&t.term(e,{usePipeline:!1,editDistance:1,boost:1})})});for(t in e.innerHTML='<p class="results__found">'+n.length+" Result(s) found</p>",n){var r=n[t].ref,r='<div class="list__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><a href="'+store[r].url+'" rel="permalink"><h2 class="archive__item-title" itemprop="headline">'+store[r].title+'</h2><div class="archive__item-teaser">'+store[r].teaser+'</div><p class="archive__item-excerpt" itemprop="description">'+store[r].excerpt.split(" ").splice(0,20).join(" ")+"...</p></a></article></div>";e.insertAdjacentHTML("beforeend",r)}}})})})},"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}();